<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>String Alignment</title>

<script type="text/javascript" charset="iso-8859-1">

function align_Strings()
{
  
	
	var string1 = document.getElementById("string1");
	var string2 = document.getElementById("string2");

	var matrix = new Array(string1.value.length+1);

	const gap = -1;
	
	const mat = 3, mismat = -2;

	
	for(var i =0; i<=string1.value.length ; i++)
	{
		matrix[i] = new Array(string2.value.length +1);
	}
	
	matrix[0][0] = 0;
	
	for(var i = 1; i<=string1.value.length ; i++)
	{
		matrix[i][0] = (gap)*(i);
	}
	
	for(var i = 1; i<=string2.value.length ; i++)
	{
		matrix[0][i] = (gap)*(i);
	}	
	
	for(var i = 1; i <= string1.value.length ; i++)
	{
		for(var j = 1; j<=string2.value.length ; j++)
		{
			var max = -20,match = 0;
			if(string1.value.charAt(i-1)==string2.value.charAt(j-1))
			{
				match = mat;
			}
			else{
				match = mismat;
			}
			
			var s1 = parseInt(matrix[i-1][j-1]) +parseInt(match);
			if(s1>(matrix[i-1][j]+gap)&&s1>(matrix[i][j-1]+gap)){
    				max=s1;
    			}
    			
    			else if(matrix[i-1][j]>=matrix[i][j-1]){
    				max = parseInt(matrix[i-1][j])+parseInt(gap);
    			}
    			else{
    				max = matrix[i][j-1]+gap;
    			}
    			matrix[i][j]=max;
			 
		}
	}
	
	
    	
  
    	
    	var i=string1.value.length;
    	var j=string2.value.length;
    	var first="";
    	var sec="";
    	
    	while(i>0&&j>0){
    	
    	if((matrix[i][j]-gap)==matrix[i-1][j])
    		{
    			first =(string1.value.charAt(i-1)+"")+first;
    			sec = ('_'+"")+sec;
    			i--;	
    		}
    			
    		else if((matrix[i][j]-gap)==matrix[i][j-1]) {
    			sec =(string2.value.charAt(j-1)+"")+sec;
    			first =('_'+"")+first;
    			j--;
    			
    		}
    		else
    		//if((matrix[i][j]-1==matrix[i-1][j-1])||(matrix[i][j]==matrix[i-1][j-1]))
    		{
    			first = (string1.value.charAt(i-1)+"")+first;
    			sec =(string2.value.charAt(j-1)+"")+sec;
    			i--;
    			j--;
    		}	
    	}
    	if(i>0){
    		while(i>0){
    			first =(string1.value.charAt(i-1)+"")+first;
    			sec =('_'+"")+sec;
    			i--;
    		}
    	}
    	else{
    		while(j>0){
    			first =('_'+"")+first;
    			sec = (string2.value.charAt(j-1)+"")+sec;
    			j--;
    		}
    	}
		
		var vin="<table border>";
		for(var p =0; p<=string1.value.length; p++)
		{
			vin+="<tr>";
			for(var q = 0 ; q<=string2.value.length;q++)
			{
			vin+="   <td>"+matrix[p][q]+" </td> ";
			}
			vin+="</tr>";	
		}
		
		document.getElementById("hola").innerHTML+=vin;
		
		document.getElementById("result1").value=first;
		document.getElementById("result2").value=sec;
		document.getElementById("string1").value = string1.value;
		document.getElementById("string2").value = string2.value;
		
		//alert(vin);
}
;
</script>


</head>

<body id="neabba">
<form name ="yay" id="hola">
<fieldset name = "yayy">
  <legend>Align Strings</legend>
  <p>String 1 : 
  <input name="s1" type="text" id="string1" value="" size="15" maxlength="30" />
Result 1 :  
<input name="res1" type="text" id="result1" value="" size="15" maxlength="30"/>
  </p>
<p>String 2 :  <input name="s2" type="text" id="string2" value="" size="15" maxlength="30" />
Result 2 :  
<input name="res2" type="text" id="result2" value="" size="15" maxlength="30"/>


</p>

<p>&nbsp;</p>

<input name="Align Strings" onclick="align_Strings()" type="button" id="align" value="Align Strings" />
</fieldset>
</form>
</body>
</html>
